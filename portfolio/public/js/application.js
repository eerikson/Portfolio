"use strict";var Photo=function(t){return this.el={},this.src="",this.sizes=[{size:"tiny",path:"/img/photos/tiny/"},{size:"small",path:"/img/photos/small/"},{size:"full",path:"/img/photos/large/"}],this.imageEl={},this.isFirefox=void 0,this.determineWhichSizeToLoad=function(){this.imageEl.src=window.devicePixelRatio>1?this.sizes[1].path:this.sizes[0].path},this.bindEvents=function(){},this.initialize=function(){return this.el=t.el,this.imageEl=this.el.querySelector("img"),this.src=this.el.dataset.src,this.sizes.forEach(function(t,i){t.path+=this.src}.bind(this)),this.determineWhichSizeToLoad(),this.bindEvents(),this},this.initialize()},PhotoGallery={photoList:[],modal:document.querySelector(".modal-photo-viewer"),modalImg:document.querySelector(".modal-photo-viewer img"),modalPhotoIndex:0,showPhotoModalViewerWithPhoto:function(t){return window.innerWidth<640?!1:(this.modal.classList.add("show"),this.modalPhotoIndex=this.photoList.indexOf(t),void window.setTimeout(function(){this.modal.classList.add("animate"),this.loadPhotoIntoModalViewer(t),this.modalImg.complete?this.handleModalImgLoad.apply(this.modalImg):this.modalImg.addEventListener("load",this.handleModalImgLoad),console.log(this.modalImg.style.height)}.bind(this),50))},handleModalImgLoad:function(){this.classList.add("ready")},loadPhotoIntoModalViewer:function(t){this.modalImg.src=t.sizes[2].path},modalElementWasClicked:function(t){this.modal.classList.remove("animate"),this.modal.classList.remove("ready"),this.modalImg.removeEventListener("load",this.handleModalImgLoad),window.setTimeout(function(){this.modal.classList.remove("show"),this.modalImg.src="/img/null.png"}.bind(this),300)},modalNextButtonWasClicked:function(t){t.stopPropagation(),-1===navigator.userAgent.toLowerCase().indexOf("firefox")&&this.modalImg.classList.remove("ready"),this.modalPhotoIndex>=this.photoList.length-1?this.modalPhotoIndex=0:this.modalPhotoIndex++,this.loadPhotoIntoModalViewer(this.photoList[this.modalPhotoIndex])},modalPreviousButtonWasClicked:function(t){t.stopPropagation(),-1===navigator.userAgent.toLowerCase().indexOf("firefox")&&this.modalImg.classList.remove("ready"),this.modalPhotoIndex<=0?this.modalPhotoIndex=this.photoList.length-1:this.modalPhotoIndex--,this.loadPhotoIntoModalViewer(this.photoList[this.modalPhotoIndex])},bindEvents:function(){this.modal.querySelector(".next").addEventListener("click",this.modalNextButtonWasClicked.bind(this)),this.modal.querySelector(".previous").addEventListener("click",this.modalPreviousButtonWasClicked.bind(this)),this.photoList.forEach(function(t){t.el.addEventListener("click",this.showPhotoModalViewerWithPhoto.bind(this,t))}.bind(this)),this.modal.addEventListener("click",this.modalElementWasClicked.bind(this))},init:function(){if(!document.querySelector(".photos.page"))return!1;var t=document.querySelectorAll(".photo");Array.prototype.forEach.call(t,function(t){this.photoList.push(new Photo({el:t}))}.bind(this)),this.bindEvents()}}.init();